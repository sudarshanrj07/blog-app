<!DOCTYPE html>
<html lang="en">
	<head>
		<%- include('./partials/head') %>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Blog</title>
	</head>
	<body>
		<%- include('./partials/nav') %>
		<div class="container mt-4">
			<h1><%= blog.title %></h1>
			<img src="<%= blog.coverImageUrl %>" width="700px" />
			<pre class="mt-3"><%= blog.body %></pre>
		</div>

		<div class="container mt-4">
			<img src="<%= blog.createdBy.profileImageUrl %>" width="100px" /> <%=
			blog.createdBy.name %>
		</div>
		<div class="container mt-3">
			<h1>Comments (<%= locals.comments.length %>)</h1>
			<% if (locals.user) { %>
			<form action="/api/blog/comment/<%= blog._id %>" method="post">
				<div class="mb-3">
					<input
						type="text"
						name="content"
						class="form-control"
						placeholder="Enter Your comments"
					/>
					<button type="submit" class="btn btn-primary">Add</button>
				</div>
			</form>
			<% } %>
			<div class="mt-3">
				<% comments.forEach(comment => { %>
				<div class="container mt-3">
					<img src="<%= comment.userId.profileImageUrl %>" width="50px" /> <%=
					comment.userId.name %> :
					<pre><%= comment.content %></pre>
				</div>
				<% }) %>
			</div>
		</div>
		<%- include('./partials/scripts') %>
	</body>
</html>
